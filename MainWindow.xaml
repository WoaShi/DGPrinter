<Window x:Class="DGPrinter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DGPrinter" Height="800" Width="400" 
        WindowStartupLocation="CenterScreen" ResizeMode="CanMinimize"
    Background="White">

    <Window.Resources>
        <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="0,5"/>
        </Style>

        <Style TargetType="GroupBox" BasedOn="{StaticResource {x:Type GroupBox}}">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="5"/>
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <ScrollViewer>
            <StackPanel>
                <TextBlock Text="DGPrinter" FontSize="20" FontWeight="Bold" Margin="0,0,0,10" HorizontalAlignment="Center"/>

                <!-- 1. Source Image -->
                <GroupBox Header="源图像">
                    <StackPanel>
                        <!-- 原有的文件选择 -->
                        <Button x:Name="BtnImage" Content="选择本地文件..." Click="BtnImage_Click"/>
                        <TextBlock Text="- 或 -" HorizontalAlignment="Center" Foreground="Gray" Margin="0,2"/>
                        <!-- 新增：屏幕截图选择 -->
                        <Button x:Name="BtnSnapshot" Content="截图..." Click="BtnSnapshot_Click" Background="#E1F5FE"/>
                    </StackPanel>
                </GroupBox>

                <!-- 2. Areas Configuration -->
                <GroupBox Header="区域设置">
                    <StackPanel>
                        <Button x:Name="BtnCanvas" Content="框选画布" Click="BtnCanvas_Click"/>
                        <TextBlock x:Name="TxtStatusCanvas" Text="Not Set" Foreground="Gray" FontSize="11" Margin="0,0,0,5"/>

                        <Button x:Name="BtnColorBtn" Content="框选取色区域按钮" Click="BtnColorBtn_Click"/>
                        <TextBlock x:Name="TxtStatusBtn" Text="Not Set" Foreground="Gray" FontSize="11" Margin="0,0,0,5"/>

                        <Button x:Name="BtnPicker" Content="框选取色区域" Click="BtnPicker_Click"/>
                        <TextBlock x:Name="TxtStatusPicker" Text="Not Set" Foreground="Gray" FontSize="11" Margin="0,0,0,5"/>

                        <Button x:Name="BtnClosePicker" Content="框选关闭取色区域按钮" Click="BtnClosePicker_Click"/>
                        <TextBlock x:Name="TxtStatusClosePicker" Text="Not Set" Foreground="Gray" FontSize="11"/>
                    </StackPanel>
                </GroupBox>

                <!-- 3. Settings -->
                <GroupBox Header="参数">
                    <StackPanel>
                        <TextBlock Text="绘制模式"/>
                        <ComboBox x:Name="ComboMode" SelectedIndex="0" Margin="0,0,0,10">
                            <ComboBoxItem Content="黑白图"/>
                            <ComboBoxItem Content="彩色轮廓(实验性)"/>
                            <ComboBoxItem Content="4bits颜色(实验性)"/>
                        </ComboBox>

                        <TextBlock Text="预计时间:"/>
                        <TextBlock x:Name="TxtPrediction" Text="等待开始..." 
                                   Foreground="#0078D7" FontWeight="Bold" FontSize="14" Margin="0,5,0,0"/>
                    </StackPanel>
                </GroupBox>

                <!-- 4. Controls -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20">
                    <Button x:Name="BtnStart" Content="开始绘画" Width="120" Height="40" Background="#DDDDDD" Click="BtnStart_Click"/>
                    <Button x:Name="BtnCancel" Content="停止 (F10)" Width="80" Margin="10,0" Visibility="Collapsed" Click="BtnCancel_Click"/>
                </StackPanel>

                <TextBlock Text="按下 F10 立即停止绘画" Foreground="Red" FontSize="10" HorizontalAlignment="Center"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>